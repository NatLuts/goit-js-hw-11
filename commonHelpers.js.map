{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '42817939-fb8caefadf90676475c3fc719';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport function getPhotos(q) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return fetch(`${BASE_URL}/?${params}`).then(res => {\n    if (!res.ok) {\n      throw new Error(res.status);\n    }\n    return res.json();\n  });\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(arr => {\n      const {\n        webformatURL,\n        tags,\n        largeImageURL,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = arr;\n      return ` <li class=\"gallery-item\"> \n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <img  \n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n              />\n            </a>\n              <ul class=\"property-list\">\n    <li class=\"list-property-item\"><strong>Likes</strong> <br> ${likes}</li>\n    <li class=\"list-property-item\"><strong>Views</strong> <br> ${views}</li>\n    <li class=\"list-property-item\"><strong>Comments</strong> <br> ${comments}</li>\n    <li class=\"list-property-item\"><strong>Downloads</strong> <br> ${downloads}</li>\n  </ul>\n          </li>`;\n    })\n    .join('');\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getPhotos } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nlet searchQuery;\nconst gallery = document.querySelector('.js-gallery ')\nconst form = document.querySelector('.js-search-form')\nconst loader = document.querySelector('.loader')\n\nform.addEventListener(\"submit\", onFormSubmit )\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n    gallery.innerHTML = \"\";\n    showLoader();\n\nsearchQuery = e.currentTarget.elements['user-search-query'].value.trim();\n\n    if (!searchQuery){\n        showEmptyInputToast(), hideLoader();\n        return;\n    }\n\n    getPhotos(searchQuery).then(res => {\n        if (res.hits.length=== 0) return showErrorToast()\n\n        gallery.innerHTML = createMarkup(res.hits);\n        refreshLightbox();\n    }).catch(console.log).finally(() => hideLoader());\n\n    e.currentTarget.reset();\n\n}\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n \n\n  function refreshLightbox() {\n    lightbox.refresh();\n  }\n\n\n  function showLoader() {\n    return loader.classList.remove('is-hidden');\n  }\n  \n  function hideLoader() {\n    return loader.classList.add('is-hidden');\n  }\n\nfunction showEmptyInputToast() {\n    return iziToast.error({\n      title: '',\n      backgroundColor: '#c55f5f',\n      titleColor: '#fff',\n      messageColor: '#fff',\n      message: 'Please write your request',\n      color: '#fff',\n      position: 'topRight',\n      progressBarColor: '#B51B1B',\n    });\n  }\n\n  function showErrorToast(){\n    return iziToast.error({\n     title: '',\n    backgroundColor: '#EF4040',\n    titleColor: '#fff',\n          messageColor: '#fff',\n          message:\n            'Sorry, there are no images matching <br/> your search query. Please, try again!',\n          color: '#fff',\n          position: 'topRight',\n          progressBarColor: '#B51B1B',\n        });\n      }\n\n     "],"names":["API_KEY","BASE_URL","getPhotos","q","params","res","createMarkup","arr","webformatURL","tags","largeImageURL","likes","views","comments","downloads","searchQuery","gallery","form","loader","onFormSubmit","e","showLoader","showEmptyInputToast","hideLoader","showErrorToast","refreshLightbox","lightbox","SimpleLightbox","iziToast"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,SAASC,EAAUC,EAAG,CAC3B,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKJ,EACL,EAAAG,EACA,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,GAAGF,CAAQ,KAAKG,CAAM,EAAE,EAAE,KAAKC,GAAO,CACjD,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE5B,OAAOA,EAAI,MACf,CAAG,CACH,CClBO,SAASC,EAAaC,EAAK,CAChC,OAAOA,EACJ,IAAIA,GAAO,CACV,KAAM,CACJ,aAAAC,EACA,KAAAC,EACA,cAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,8CACiCG,CAAa;AAAA;AAAA;AAAA,uBAGpCF,CAAY;AAAA,uBACZC,CAAI;AAAA;AAAA;AAAA;AAAA,iEAIsCE,CAAK;AAAA,iEACLC,CAAK;AAAA,oEACFC,CAAQ;AAAA,qEACPC,CAAS;AAAA;AAAA,gBAG9E,CAAK,EACA,KAAK,EAAE,CACZ,CCpBA,IAAIC,EACJ,MAAMC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAS,SAAS,cAAc,SAAS,EAE/CD,EAAK,iBAAiB,SAAUE,CAAc,EAE9C,SAASA,EAAaC,EAAG,CAOrB,GANAA,EAAE,eAAc,EAChBJ,EAAQ,UAAY,GACpBK,IAEJN,EAAcK,EAAE,cAAc,SAAS,mBAAmB,EAAE,MAAM,OAE1D,CAACL,EAAY,CACbO,EAAmB,EAAIC,IACvB,MACH,CAEDrB,EAAUa,CAAW,EAAE,KAAKV,GAAO,CAC/B,GAAIA,EAAI,KAAK,SAAU,EAAG,OAAOmB,EAAgB,EAEjDR,EAAQ,UAAYV,EAAaD,EAAI,IAAI,EACzCoB,GACR,CAAK,EAAE,MAAM,QAAQ,GAAG,EAAE,QAAQ,IAAMF,EAAU,CAAE,EAEhDH,EAAE,cAAc,OAEpB,CAGA,MAAMM,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAG,EAGD,SAASF,GAAkB,CACzBC,EAAS,QAAO,CACjB,CAGD,SAASL,GAAa,CACpB,OAAOH,EAAO,UAAU,OAAO,WAAW,CAC3C,CAED,SAASK,GAAa,CACpB,OAAOL,EAAO,UAAU,IAAI,WAAW,CACxC,CAEH,SAASI,GAAsB,CAC3B,OAAOM,EAAS,MAAM,CACpB,MAAO,GACP,gBAAiB,UACjB,WAAY,OACZ,aAAc,OACd,QAAS,4BACT,MAAO,OACP,SAAU,WACV,iBAAkB,SACxB,CAAK,CACF,CAED,SAASJ,GAAgB,CACvB,OAAOI,EAAS,MAAM,CACrB,MAAO,GACR,gBAAiB,UACjB,WAAY,OACN,aAAc,OACd,QACE,kFACF,MAAO,OACP,SAAU,WACV,iBAAkB,SAC5B,CAAS,CACT"}